<project name="@projectName@.integration">

	<path id="integration.classpath">
		<pathelement path="bin/main"/>
		<pathelement path="bin/tests/unit"/>
		<fileset dir="bin/lib/testing/jars" includes="*.jar"/>
	</path>

	<target name="integration.compile" depends="unit.compile" description="compile tests/integration">
		<mkdir dir="bin/tests/integration"/>
		<javac srcdir="tests/integration" destdir="bin/tests/integration" classpathref="integration.classpath" debug="true" nowarn="yes" source="1.5" target="1.5" encoding="utf8"/>
	</target>

	<target name="integration.run" depends="integration.compile" description="run tests/integration">
		<mkdir dir="bin/results/integration"/>
		<junit printsummary="on" showoutput="yes" failureproperty="test-suite-failed" fork="yes" forkmode="once">
			<classpath>
				<pathelement path="bin/tests/integration"/>
				<path refid="integration.classpath"/>
			</classpath>
			<formatter type="xml"/>
			<batchtest todir="bin/results/integration">
				<fileset dir="tests/integration" includes="**/*Test.java" excludes="**/Abstract*.java"/>
			</batchtest>
		</junit>
		<fail if="test-suite-failed">integration tests failed</fail>
	</target>

</project>

