<project name="@projectName@.main" xmlns:ivy="antlib:org.apache.ivy.ant">

	<path id="main.classpath">
		<fileset dir="bin/lib/main/jars" includes="**/*.jar"/>
	</path>

	<target name="main.compile" depends="ivy.retrieve" description="compile src/main/ to bin/main/">
		<mkdir dir="bin/main"/>
		<mkdir dir="bin/apt-javac"/>
		<javac destdir="bin/main" classpathref="main.classpath" debug="true" nowarn="yes" source="1.6" target="1.6" encoding="utf8">
			<src path="src/main"/>
			<src path="src/codegen"/>
			<compilerarg value="-s"/>
			<compilerarg value="bin/apt-javac"/>
			<compilerarg value="-processor"/>
			<compilerarg value="org.exigencecorp.bindgen.processor.BindgenAnnotationProcessor"/>
			<compilerarg value="-Abindgen.skipExistingBindingCheck=true"/> <!-- for javac -->
			<compilerarg value="-XprintRounds"/>
		</javac>
		<copy todir="bin/main">
			<fileset dir="src/main" includes="**/*" excludes="**/*.java"/>
			<fileset dir="src/codegen" includes="**/*" excludes="**/*.java"/>
		</copy>
	</target>
</project>
