<ivysettings>
	<settings defaultResolver="default"/>
	<include url="${ivy.default.settings.dir}/ivysettings-public.xml"/>
	<include url="${ivy.default.settings.dir}/ivysettings-local.xml"/>
	<property name="joist.version" value="SNAPSHOT" override="false"/>
	<resolvers>
		<!-- Copy/paste from ivysettings-local.xml bith with checkmodified/changingPattern to bust the cache for snapshots. -->
		<filesystem name="local-checkmodified" checkmodified="true" changingPattern=".*SNAPSHOT">
			<ivy pattern="${ivy.local.default.root}/${ivy.local.default.ivy.pattern}" />
			<artifact pattern="${ivy.local.default.root}/${ivy.local.default.artifact.pattern}" />
		</filesystem>

		<!-- For downloading our own jars, e.g. bindgen, timeandmoney, etc. -->
		<url name="joist">
			<ivy pattern="http://repo.joist.ws/${ivy.local.default.ivy.pattern}" />
			<artifact pattern="http://repo.joist.ws/${ivy.local.default.artifact.pattern}" />
		</url>

		<url name="joist-m2" m2compatible="true">
			<ivy pattern="http://repo.joist.ws/[organisation]/[module]/[revision]/[artifact]-[revision].[ext]" />
			<artifact pattern="http://repo.joist.ws/[organization]/[module]/[revision]/[artifact]-[revision](-[classifier]).[ext]"/>
		</url>

		<!-- For uploading releases. -->
		<ssh name="joist-upload" user="root" host="repo.joist.ws" publishPermissions="0644">
			<ivy pattern="/var/joist.repo/[organisation]/[module]/[revision]/[type]s/[artifact].[ext]" />
			<artifact pattern="/var/joist.repo/[organisation]/[module]/[revision]/[type]s/[artifact].[ext]" />
		</ssh>

		<!-- for publishing via an sshfs share -->
		<filesystem name="maven-share" m2compatible="true">
			<artifact pattern="${user.home}/repo/[organization]/[module]/[revision]/[artifact]-[revision](-[classifier]).[ext]"/>
		</filesystem>

		<!-- they have webdriver -->
		<ibiblio name="openqa" root="http://nexus.openqa.org/content/repositories/releases/" m2compatible="true"/>
		<!-- For japex. -->
		<ibiblio name="java.net" root="http://download.java.net/maven/1/" pattern="[organization]/jars/[module]-[revision].[ext]" />

		<!-- Repeating the checkmodified/changingPattern incantation here is very important. -->
		<chain name="default" checkmodified="true" changingPattern=".*SNAPSHOT">
			<!-- Check just-published local before our joist repo. -->
			<resolver ref="local-checkmodified"/>
			<resolver ref="joist"/>
			<resolver ref="joist-m2"/>
			<resolver ref="public"/>
			<resolver ref="openqa"/>
			<resolver ref="java.net"/>
		</chain>
	</resolvers>
</ivysettings>
