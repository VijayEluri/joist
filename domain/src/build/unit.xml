<project name="test">

	<path id="test.classpath">
		<pathelement path="bin/main"/>
		<fileset dir="bin/test.lib" includes="*.jar"/>
	</path>

	<target name="test.compile" depends="main.compile" description="compile tests/">
		<mkdir dir="bin/tests"/>
		<javac srcdir="tests" destdir="bin/tests" classpathref="test.classpath" debug="true" nowarn="yes" source="1.5" target="1.5" encoding="utf8"/>
	</target>

	<target name="test.junit" depends="test.compile" description="run junit">
		<mkdir dir="bin/tests-results"/>
		<junit printsummary="on" showoutput="yes" failureproperty="test-suite-failed" fork="yes" forkmode="once">
			<!--
			<jvmarg value="-Xdebug"/>
			<jvmarg value="-Xnoagent"/>
			<jvmarg value="-Xrunjdwp:transport=dt_socket,server=y,suspend=n,address=8000"/>
			<jvmarg value="-agentlib:yjpagent"/>
			-->
			<classpath>
				<pathelement path="bin/tests"/>
				<path refid="test.classpath"/>
			</classpath>
			<formatter type="xml"/>
			<batchtest todir="bin/tests-results">
				<fileset dir="tests" includes="**/*Test.java" excludes="**/Abstract*.java"/>
			</batchtest>
		</junit>
	</target>

</project>

